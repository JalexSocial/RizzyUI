@inherits LayoutComponentBase
@using RizzyUI
@using Rizzy.Htmx
@using Rizzy

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <HtmxConfigHeadOutlet/>

    <link nonce="@Nonce" rel="stylesheet" href="/css/app.css" />

    <RzHeadOutlet />
    <RzThemeProvider />

     <!--
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@@3.x.x/dist/cdn.min.js"></script>
    -->
    <script nonce="@Nonce" src="https://unpkg.com/htmx.org@@2.0.4" integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous"></script>

    <script nonce="@Nonce" defer type="module" src="/_content/Rizzy/js/rizzy.js"></script>
    <script nonce="@Nonce" defer type="module" src="@Assets["/_content/RizzyUI/js/rizzyui-csp.js"]"></script>

    <link rel="preconnect" nonce="@Nonce" href="https://fonts.googleapis.com">
    <link rel="preconnect" nonce="@Nonce" href="https://fonts.gstatic.com" crossorigin>
    <link nonce="@Nonce" href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@@0,300..900;1,300..900&display=swap" rel="stylesheet">

    <link rel="preconnect" nonce="@Nonce" href="https://fonts.gstatic.com" crossorigin>
    <link nonce="@Nonce" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">

    <script nonce="@Nonce">
	    window.addEventListener('message', (event) => {
		    if (event.data && typeof event.data.darkMode === 'boolean') {
                document.documentElement.classList.toggle('dark', event.data.darkMode);
		    }
	    });
    </script>
</head>

<body class="overflow-hidden bg-surface text-on-surface" hx-ext="rizzy-nonce">
    @Body
</body>

</html>

@code {
    private string Nonce { get; set; } = string.Empty;

    [Inject] private IRizzyNonceProvider NonceProvider { get; set; } = null!;

    protected override void OnInitialized()
    {
        base.OnInitialized();

        Nonce = NonceProvider.GetNonce();
    }

}